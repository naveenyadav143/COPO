{% extends "base.html" %}
{% load static %}

{% block title %}My Courses - CO-PO Calculator{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin:auto; padding:20px;">

    <div style="background: linear-gradient(90deg, #2563eb, #ec4899, #f43f5e); color:white; padding:20px; border-radius:10px; text-align:center;">
        <h2>My Courses</h2>
    </div>

    <div class="d-flex flex-wrap gap-3 py-4 justify-content-center">
        {% if courses %}
            {% for course in courses %}

            <div class="card gradient-card" style="min-width: 250px; flex-shrink:0; cursor:pointer; border-radius:10px; color:white;">

                <div class="card-body text-center" data-bs-toggle="collapse" data-bs-target="#details-{{ course.id }}">
                    <h4 class="card-title">{{ course.name }}</h4>
                    <p class="card-text">{{ course.code }}</p>
                </div>

                <div id="details-{{ course.id }}" class="collapse">
                    <div class="card-body" style="color:black; background:white;">
                        <h5>Course Outcomes (COs)</h5>
                        {% with cos=course.co_set.all %}
                            {% if cos %}
                                <ul class="list-unstyled">
                                    {% for co in cos %}
                                        <li><strong>{{ co.number }}</strong>: {{ co.description }}</li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p>No COs added yet.</p>
                            {% endif %}
                        {% endwith %}

                        <div class="d-flex flex-column gap-2 mt-3">
                            <a href="{% url 'co_attainment' %}?course_id={{ course.id }}" class="btn btn-success w-100">ðŸ“Š CO Attainment</a>
                            <a href="{% url 'po_attainment' %}?course_id={{ course.id }}" class="btn btn-warning w-100">ðŸ“ˆ PO Attainment</a>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}
        {% else %}
            <p>No courses added yet. <a href="{% url 'add_course' %}">Add your first course</a></p>
        {% endif %}
    </div>

    <div class="text-center mt-4">
        <button class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#pos-details">View All POs</button>
    </div>

    <div id="pos-details" class="collapse mt-3">
        <div class="card">
            <div class="card-body">
                <h5>Program Outcomes (POs)</h5>
                {% if po_list %}
                    <ul class="list-unstyled">
                        {% for po in po_list %}
                            <li><strong>{{ po.number }}</strong>: {{ po.description }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No POs added yet.</p>
                {% endif %}
            </div>
        </div>
    </div>

</div>

<style>
.gradient-card {
    background: linear-gradient(135deg, #2563eb, #8a77de, #d07383);
    color: white;
    padding: 20px;
    transition: transform 0.3s, box-shadow 0.3s;
}

.gradient-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}
</style>

{% endblock %}
